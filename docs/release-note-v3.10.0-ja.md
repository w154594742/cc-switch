# CC Switch v3.10.0

> OpenCode サポート、グローバルプロキシ、Claude Rectifier とマルチアプリ体験の強化

**[中文版 →](release-note-v3.10.0-zh.md) | [English →](release-note-v3.10.0-en.md)**

---

## 概要

CC Switch v3.10.0 では OpenCode サポートが追加され、4番目の管理対象 CLI アプリケーションとなりました。
また、グローバルプロキシ設定、Claude Rectifier（thinking 署名修正機能）、ヘルスチェックの強化、プロバイダー別設定など、多くの重要な機能が追加され、マルチアプリワークフローとターミナル体験が全面的に改善されました。

**リリース日**: 2026-01-21

---

## ハイライト

- OpenCode サポート：プロバイダー、MCP サーバー、Skills の完全管理、初回起動時の自動インポート
- グローバルプロキシ：すべての送信ネットワークリクエストに統一プロキシを設定
- Claude Rectifier：thinking 署名修正機能、サードパーティ API との互換性向上
- ヘルスチェック強化：カスタムプロンプト設定、CLI 互換リクエスト形式
- プロバイダー別設定：プロバイダー固有の設定の永続化をサポート
- アプリ表示制御：アプリの表示/非表示を自由に設定、トレイメニューと同期
- ターミナル改善：プロバイダー専用ターミナルボタン、fnm パスサポート、クロスプラットフォーム安全起動
- WSL ツール検出：WSL 環境でのツールバージョン検出とセキュリティ強化

---

## 主な機能

### OpenCode サポート（新しい4番目のアプリ）

- 完全な OpenCode プロバイダー管理：追加、編集、切り替え、削除
- MCP サーバー管理：Claude/Codex/Gemini と統一されたアーキテクチャ
- Skills サポート：OpenCode でも Skills 機能を使用可能
- 初回起動時の自動インポート：既存の OpenCode 設定を検出すると自動的にインポート
- 完全な国際化：中国語/英語/日本語サポート (#695)

### グローバルプロキシ

- すべての送信ネットワークリクエストに統一プロキシを設定 (#596、@yovinchen に感謝)
- HTTP/HTTPS プロキシプロトコルをサポート
- 外部 API へのプロキシアクセスが必要なネットワーク環境に適用

### Claude Rectifier（Thinking 署名修正機能）

- Claude API の thinking 署名を自動修正 (#595、@yovinchen に感謝)
- 一部のサードパーティ API ゲートウェイが返す互換性のない thinking ブロック形式を解決
- 詳細設定で有効/無効を切り替え可能

### ヘルスチェック強化

- ストリーミングヘルスチェック用のカスタムプロンプトを設定可能 (#623、@yovinchen に感謝)
- CLI 互換リクエスト形式をサポートし、実際の使用シナリオをより良くシミュレート
- 障害検出の精度を向上

### プロバイダー別設定

- 各プロバイダーごとに設定を個別に保存可能 (#663、@yovinchen に感謝)
- 設定の永続化：再起動後もプロバイダー固有の設定を保持
- 異なるプロバイダーに異なる設定が必要なシナリオに適用

### アプリ表示制御

- 任意のアプリを自由に表示/非表示（Gemini はデフォルトで非表示）
- トレイメニューは表示設定と自動的に同期
- 非表示のアプリはメインインターフェースとトレイメニューに表示されない

### Takeover コンパクトモード

- 3つ以上の表示アプリがある場合、自動的にコンパクトレイアウトを使用
- マルチアプリシナリオでのスペース利用を最適化

### ターミナル改善

- プロバイダー専用ターミナルボタン：ワンクリックでターミナルで現在のプロバイダーを使用 (#564、@kkkman22 に感謝)
- `fnm` パスサポート：fnm で管理された Node.js パスを自動認識
- クロスプラットフォーム安全起動：Windows/macOS/Linux のターミナル起動ロジックを改善

### WSL ツール検出

- WSL 環境でツールバージョンを検出 (#627、@yovinchen に感謝)
- コマンドインジェクションリスクを防ぐためのセキュリティ強化を追加

### Skills プリセット強化

- `baoyu-skills` プリセットリポジトリを追加
- 不足しているデフォルトリポジトリを自動補完し、すぐに使える状態を確保

---

## 体験の改善

- キーボードショートカット：`ESC` を押してパネルをすばやく戻る/閉じる (#670、@xxk8 に感謝)
- プロキシログの簡素化：より明確で読みやすい出力 (#585、@yovinchen に感謝)
- 価格エディター UX：統一された `FullScreenPanel` スタイル
- 詳細設定レイアウト：Rectifier セクションを Failover の下に移動し、論理的な流れを改善
- OpenRouter 互換モード：デフォルトで無効、UI トグルを非表示（煩雑さを軽減）

---

## バグ修正

### プロキシとフェイルオーバー

- 自動フェイルオーバーが有効な場合、すぐに P1 に切り替え（次のリクエストを待たずに）

### プロバイダー管理

- 保存後にプロバイダー編集ダイアログを再度開いたときにデータが古い問題を修正 (#654、@YangYongAn に感謝)
- プリセット切り替え時に baseUrl と apiKey の状態がリセットされない問題を修正
- エンドポイント自動選択状態が永続化されない問題を修正 (#611、@yovinchen に感謝)
- アイコンカラーが設定されていない場合、デフォルトカラーを自動適用

### ディープリンク

- マルチエンドポイントインポートをサポート (#597、@yovinchen に感謝)
- `GEMINI_BASE_URL` より `GOOGLE_GEMINI_BASE_URL` を優先

### MCP

- WSL ターゲットパスの `cmd /c` ラッパーをスキップ (#592、@cxyfer に感謝)

### 使用量テンプレート

- 変数ヒントを追加、検証の問題を修正 (#628、@YangYongAn に感謝)
- プロバイダー間での設定漏洩を防止
- 使用量ブロックのオフセットがアクションボタンの幅に自動適応 (#613、@yovinchen に感謝)

### Gemini

- タイムアウトパラメータを Gemini CLI 形式に変換 (#580、@cxyfer に感謝)

### UI

- `FullScreenPanel` での Select ドロップダウンのレンダリング問題を修正

---

## 注意事項

- **OpenCode は新しくサポートされたアプリです**：関連機能を使用するには、まず OpenCode CLI をインストールする必要があります。
- **グローバルプロキシはすべての送信リクエストに影響します**：使用量クエリ、ヘルスチェックなどのネットワーク操作を含みます。
- **Rectifier は実験的機能です**：問題が発生した場合は、詳細設定で無効にできます。

---

## 特別な感謝

@yovinchen @YangYongAn @cxyfer @xxk8 @kkkman22 @Shuimo03 の皆様、このリリースへの貢献に感謝します！
@libukai 様、エレガントなフェイルオーバー関連 UI のデザインに感謝します！

---

## ダウンロードとインストール

[Releases](https://github.com/farion1231/cc-switch/releases/latest) から適切なバージョンをダウンロードしてください。

### システム要件

| システム | 最小バージョン                   | アーキテクチャ                      |
| -------- | -------------------------------- | ----------------------------------- |
| Windows  | Windows 10 以降                  | x64                                 |
| macOS    | macOS 10.15 (Catalina) 以降      | Intel (x64) / Apple Silicon (arm64) |
| Linux    | 下表参照                         | x64                                 |

### Windows

| ファイル                                 | 説明                                                 |
| ---------------------------------------- | ---------------------------------------------------- |
| `CC-Switch-v3.10.0-Windows.msi`          | **推奨** - MSI インストーラー、自動更新対応          |
| `CC-Switch-v3.10.0-Windows-Portable.zip` | ポータブル版、解凍して実行、レジストリ書き込みなし   |

### macOS

| ファイル                         | 説明                                                              |
| -------------------------------- | ----------------------------------------------------------------- |
| `CC-Switch-v3.10.0-macOS.zip`    | **推奨** - 解凍して Applications にドラッグ、Universal Binary     |
| `CC-Switch-v3.10.0-macOS.tar.gz` | Homebrew インストールと自動更新用                                 |

> **注意**：作者が Apple Developer アカウントを持っていないため、初回起動時に「開発元を確認できません」という警告が表示される場合があります。一度閉じてから、「システム設定」→「プライバシーとセキュリティ」→「このまま開く」をクリックすると、その後は正常に開けます。

### Homebrew (macOS)

```bash
brew tap farion1231/ccswitch
brew install --cask cc-switch
```

更新：

```bash
brew upgrade --cask cc-switch
```

### Linux

| ディストリビューション                  | 推奨形式    | インストール方法                                                       |
| --------------------------------------- | ----------- | ---------------------------------------------------------------------- |
| Ubuntu / Debian / Linux Mint / Pop!\_OS | `.deb`      | `sudo dpkg -i CC-Switch-*.deb` または `sudo apt install ./CC-Switch-*.deb` |
| Fedora / RHEL / CentOS / Rocky Linux    | `.rpm`      | `sudo rpm -i CC-Switch-*.rpm` または `sudo dnf install ./CC-Switch-*.rpm`  |
| openSUSE                                | `.rpm`      | `sudo zypper install ./CC-Switch-*.rpm`                                |
| Arch Linux / Manjaro                    | `.AppImage` | 実行権限を追加して直接実行、または AUR を使用                          |
| その他のディストリビューション / 不明   | `.AppImage` | `chmod +x CC-Switch-*.AppImage && ./CC-Switch-*.AppImage`              |
