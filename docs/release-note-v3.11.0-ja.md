# CC Switch v3.11.0

> OpenClaw サポート、セッションマネージャー、バックアップ管理と 50 以上の改善

**[中文版 →](release-note-v3.11.0-zh.md) | [English →](release-note-v3.11.0-en.md)**

---

## 概要

CC Switch v3.11.0 は大規模なアップデートです。5番目のアプリケーション **OpenClaw** の完全管理サポートを追加し、新しい**セッションマネージャー**と**バックアップ管理**機能を導入しました。さらに、**Oh My OpenCode (OMO) 統合**、プロバイダー切り替えの**部分キーフィールドマージ**アーキテクチャアップグレード、**設定ページのリファクタリング**など、多数の改善により全体的な体験がさらに向上しました。

**リリース日**: 2026-02-26

**更新規模**: 147 commits | 274 files changed | +32,179 / -5,467 lines

---

## ハイライト

- **OpenClaw サポート**: 5番目の管理対象アプリ、13 のプロバイダープリセット、Env/Tools/AgentsDefaults 設定エディター、Workspace ファイル管理
- **セッションマネージャー**: 5つのアプリの会話履歴を閲覧、目次ナビゲーションとセッション内検索
- **バックアップ管理**: 独立バックアップパネル、設定可能なポリシー、定期バックアップ、マイグレーション前自動バックアップ
- **Oh My OpenCode 統合**: 完全な OMO 設定管理、OMO Slim 軽量モードサポート
- **部分キーフィールドマージ（⚠️ 破壊的変更）**: プロバイダー切り替え時にプロバイダー関連フィールドのみ置換し、その他の設定を保持；「共通設定スニペット」機能は削除されました
- **設定ページリファクタリング**: 5タブレイアウト、コード量約 40% 削減
- **6つの新プロバイダープリセット**: AWS Bedrock、SSAI Code、CrazyRouter、AICoding など
- **Thinking Budget Rectifier**: より精密な thinking budget 制御
- **テーマ切り替えアニメーション**: 円形リビール遷移アニメーション
- **WebDAV 自動同期**: 自動同期と大容量ファイル保護

---

## 主な機能

### OpenClaw サポート（新しい5番目のアプリ）

Claude Code、Codex、Gemini CLI、OpenCode に続く5番目の管理対象アプリケーションとして OpenClaw の完全管理サポートを追加しました。

- **プロバイダー管理**: OpenClaw プロバイダーの追加、編集、切り替え、削除、13 の内蔵プリセット
- **設定エディター**: Env（環境変数）、Tools（ツール）、AgentsDefaults（エージェントデフォルト）の3つの専用パネル
- **Workspace パネル**: HEARTBEAT/BOOTSTRAP/BOOT ファイル管理とデイリーメモリ
- **Additive オーバーレイモード**: 上書きではなく設定の重ね合わせをサポート
- **デフォルトモデルボタン**: ワンクリックで推奨モデルを入力、プロバイダー追加時に候補モデルを allowlist に自動登録
- **ブランドとインタラクション**: 専用ブランドアイコン、アプリ切り替えフェード遷移アニメーション
- **ディープリンクサポート**: URL 経由で OpenClaw プロバイダー設定をインポート
- **完全な国際化**: 中/英/日 三言語完全対応

### セッションマネージャー

会話履歴を閲覧・検索できる新しいセッションマネージャーです。

- Claude Code、Codex、Gemini CLI、OpenCode、OpenClaw の5つのアプリの会話履歴を閲覧（#867、@TinsFox に感謝）
- 目次ナビゲーションとセッション内検索
- セッションページに入ると現在のアプリで自動フィルター
- 並列ディレクトリスキャン + ヘッドテール JSONL 読み取りで読み込みパフォーマンスを最適化

### バックアップ管理

データの安全性を高める独立バックアップ管理パネルです。

- 設定可能なバックアップポリシー: 最大バックアップ数、自動クリーンアップルール
- ランタイム中の1時間ごとの定期自動バックアップ
- データベースマイグレーション前の自動バックアップ、バックフィル警告プロンプト
- バックアップのリネームと削除をサポート（確認ダイアログ付き）
- バックアップファイル名にローカルタイムを使用、より直感的に

### Oh My OpenCode (OMO) 統合

完全な Oh My OpenCode 設定ファイル管理です。

- エージェントモデル選択、カテゴリ設定、推奨モデル入力（#972、@yovinchen に感謝）
- エージェントモデル選択 UX の改善、lowercase key 問題の修正（#1004、@yovinchen に感謝）
- OMO Slim 軽量モードサポート
- OMO と OMO Slim の相互排他（データベースレベルで一貫性を保証）

### ワークスペース

- デイリーメモリファイルの全文検索、日付順ソート
- ディレクトリパスがクリック可能に、ファイル位置をすばやく開く

### ツールバー

- AppSwitcher がウィンドウ幅に応じて自動的にコンパクトモードに折りたたみ
- コンパクトモード切り替えのスムーズ遷移アニメーション

### 設定

- プロキシと使用量機能に初回使用確認ダイアログを追加、誤操作を防止
- `enableLocalProxy` スイッチを追加、ホーム画面のプロキシ UI 表示を制御
- より詳細なローカル環境チェック: CLI ツールバージョン検出（#870、@kv-chiu に感謝）、Volta パス検出（#969、@myjustify に感謝）

### プロバイダープリセット

- **AWS Bedrock**: AKSK と API Key の2種類の認証方式をサポート（#1047、@keithyt06 に感謝）
- **SSAI Code**: パートナープリセット、5アプリ対応
- **CrazyRouter**: パートナープリセットと専用アイコン
- **AICoding**: パートナープリセットとプロモーションテキスト
- 国内モデルプロバイダープリセットを最新版に更新
- Qwen Coder を百炼 (Bailian) にリネーム（#965、@zhu-jl18 に感謝）

### その他の新機能

- **Thinking Budget Rectifier**: より精密な thinking budget 制御（#1005、@yovinchen に感謝）
- **WebDAV 自動同期**: 自動同期設定と大容量ファイル保護（#923、@clx20000410 に感謝；#1043、@SaladDay に感謝）
- **テーマ切り替えアニメーション**: 円形リビール遷移アニメーション（#905、@funnytime75 に感謝）
- **Claude 設定エディタークイックトグル**: よく使う設定項目のクイック切り替え（#1012、@JIA-ss に感謝）
- **動的エンドポイントヒント**: API フォーマット選択に基づく動的ヒントテキスト（#860、@zhu-jl18 に感謝）
- **使用量ダッシュボード強化**: 自動更新、堅牢なフォーマット（#942、@yovinchen に感謝）
- **新しい価格データ**: claude-opus-4-6 と gpt-5.3-codex（#943、@yovinchen に感謝）
- **サイレント起動の最適化**: サイレント起動オプションは自動起動が有効な場合のみ表示

---

## アーキテクチャ改善

### 部分キーフィールドマージ（⚠️ 破壊的変更）

プロバイダー切り替えを完全な設定上書きから部分キーフィールドマージ戦略に変更しました（#1098）。

**変更前**: プロバイダーを切り替えると、`settings_config` 全体がライブ設定ファイルに上書きされていました。つまり、ユーザーがライブファイルに手動で追加した非プロバイダー設定（プラグイン設定、MCP 設定、権限設定など）は、切り替えのたびに失われていました。この問題を補うため、以前のバージョンでは「共通設定スニペット」機能を提供し、毎回の切り替え時にマージされる共通設定を定義できました。

**変更後**: プロバイダー切り替え時に、プロバイダー関連のキー値（API キー、エンドポイント、モデルなど）のみが置換され、その他の設定はそのまま保持されます。そのため「共通設定スニペット」機能は不要となり、削除されました。

**影響と移行**:
- 共通設定スニペットを**使用していなかった**場合、この変更は完全に透過的で、切り替え体験が向上するだけです
- カスタム設定（MCP 設定、権限など）を保持するために共通設定スニペットを**使用していた**場合、それらの設定は切り替え時に自動的に保持されるようになり、追加の操作は不要です
- 共通設定スニペットを他の目的（切り替え時に追加設定を注入するなど）で使用していた場合は、アップグレード後にライブ設定ファイルに手動で設定を追加してください

このリファクタリングにより、フロントエンドファイル 6 つ（コンポーネント 3 つ + hooks 3 つ）と約 150 行のバックエンドデッドコードを削除しました。

### 手動インポートに変更

起動時の自動インポートを廃止し、手動の「現在の設定をインポート」ボタンに変更。意図しないユーザーデータの上書きを防止します。

### OmoVariant パラメータ化

`OmoVariant` 構造体によるパラメータ化で、OMO モジュールの約250行の重複コードを削除しました。

### OMO 共通設定の削除

2層マージシステムを削除し、約1,733行のコードを削減、アーキテクチャを簡素化しました。

### ProviderForm 分割

ProviderForm コンポーネントを2,227行から1,526行に削減し、5つの独立モジュール（opencodeFormUtils、useOmoModelSource、useOpencodeFormState、useOmoDraftState、useOpenclawFormState）に分離。保守性が大幅に向上しました。

### MCP/Skills 共有コンポーネント

AppCountBar、AppToggleGroup、ListItemRow などの共有コンポーネントを抽出し、MCP と Skills パネルの重複コードを削減（#897、@PeanutSplash に感謝）。

### 設定ページリファクタリング

設定ページを5タブレイアウト（一般 | プロキシ | 詳細 | 使用量 | 情報）にリファクタリング。SettingsPage のコードを約716行から約426行に削減しました。

### その他の改善

- ターミナル統一: グローバル設定でターミナル選択を統一、WezTerm サポートを追加
- Claude モデル参照を 4.5 から 4.6 に更新

---

## バグ修正

### 重大な修正

- **Windows ホームディレクトリ回帰**: デフォルトのホームディレクトリ解決を復元し、Git/MSYS 環境でのデータベースパス変更によるデータ「消失」を防止
- **Linux 白画面**: AMD GPU の WebKitGTK ハードウェアアクセラレーションを無効化し、一部の Linux システムの起動白画面問題を解決（#986、@ThendCN に感謝）
- **OpenAI Beta パラメータ**: `/v1/chat/completions` に `?beta=true` を追加しないように修正、Nvidia など OpenAI Chat 形式を使用するプロバイダーのリクエスト失敗を修正（#1052、@jnorthrup に感謝）
- **ヘルスチェック認証**: プロバイダーの `auth_mode` 設定を尊重し、Bearer 認証のみをサポートするプロキシサービスのヘルスチェック失敗を回避（#824、@Jassy930 に感謝）

### プロバイダープリセット修正

- OpenClaw `/v1` プレフィックスの二重パス問題を修正
- Opus 価格修正（$15/$75 → $5/$25）と 4.6 へのアップグレード
- AIGoCode URL を `https://api.aigocode.com` に統一
- Zhipu GLM の古いパートナーステータスを削除
- 新規 Claude プロバイダー作成時の API Key 入力フィールドの表示を復元
- 非アクティブプロバイダーのクイックトグルを非表示、コンテキスト対応の JSON エディターヒントを表示

### OMO 修正

- omo-slim カテゴリチェックの補完（add/form/mutation パス）
- OMO Slim プロバイダー変更後のクエリキャッシュ無効化を修正
- OMO agent/category 推奨モデルをアップストリームソースと同期
- 「推奨を入力」ボタン失敗時の toast フィードバックを追加
- OMO/OMO Slim の最後のプロバイダー削除制限を撤廃
- OpenCode でモデル未設定時の保存を拒否（#932、@yovinchen に感謝）

### OpenClaw 修正

- 25個の欠落 i18n キー、key={index} を安定 ID に置換、ディープリンク additive マージなどのコードレビュー問題を修正
- EnvPanel 堅牢性強化（NaN ガード、配列インデックスではなくエントリーキー名を使用）
- i18n 重複キーのマージ、プロバイダーフォーム翻訳を復元

### プラットフォーム修正

- Windows サイレント起動時のウィンドウフラッシュ（#901、@funnytime75 に感謝）
- タイトルバーのダークモード追従（#903、@funnytime75 に感謝）
- Windows の Skills パスセパレーターマッチング（#868、@stmoonar に感謝）
- WSL ヘルパー関数の条件付きコンパイル

### UI 修正

- ツールバーの高さクリッピングによる AppSwitcher の遮蔽を修正
- 新バージョンがある場合、緑のチェックマークではなく更新バッジを表示
- セッションマネージャーボタンを Claude/Codex アプリでのみ表示
- SQL インポート/エクスポートカードのダークモードスタイルを統一（#1067、@SaladDay に感謝）

### その他の修正

- セッションマネージャーのハードコードされた中国語文字列を i18n キーに置換
- Skill ドキュメント URL のブランチとパスを修正（#977、@yovinchen に感謝）
- OpenCode install.sh インストールパス検出の補完（#988、@zhu-jl18 に感謝）
- Skill ZIP シンボリックリンク解決の修正（#1040、@yovinchen に感謝）
- MCP フォームに OpenCode チェックボックスを追加（#1026、@yovinchen に感謝）
- useProvidersQuery の自動インポート副作用を削除

---

## パフォーマンス最適化

- セッションパネルの並列ディレクトリスキャン + ヘッドテール JSONL 読み取りで、セッションリスト読み込み速度を大幅向上
- Tauri ローカル IPC の不要な query cache を削除し、メモリ使用量を削減

---

## ドキュメント

- スポンサー更新: SSSAiCode、Crazyrouter、AICoding、Right Code、MiniMax
- ユーザーマニュアルを追加（#979、@yovinchen に感謝）

---

## 注意事項

- **OpenClaw は新しくサポートされたアプリです**: 関連機能を使用するには、先に OpenClaw CLI をインストールする必要があります。
- **⚠️ 共通設定スニペット機能は削除されました**: プロバイダー切り替えが部分キーフィールドマージ（API キー、エンドポイント、モデルなどのみ置換）に変更されたため、ユーザーのその他の設定は自動的に保持され、共通設定スニペットは不要になりました。移行の詳細は上記「アーキテクチャ改善」セクションを参照してください。
- **自動インポートは手動に変更されました**: 起動時に外部設定を自動インポートしなくなりました。必要に応じて「現在の設定をインポート」を手動でクリックしてください。
- **OMO と OMO Slim は相互排他**: 同時に一つだけ有効にできます。切り替え時にもう一方は自動的に無効になります。
- **バックアップ機能はデフォルトで有効**: ランタイム中に1時間ごとに自動バックアップします。バックアップパネルでポリシーを調整できます。

---

## 特別な感謝

以下のコントリビューターの皆様、このリリースへの貢献に感謝します！

@TinsFox @keithyt06 @kv-chiu @SaladDay @jnorthrup @JIA-ss @clx20000410 @ThendCN @yovinchen @zhu-jl18 @myjustify @funnytime75 @PeanutSplash @Jassy930 @stmoonar

---

## ダウンロードとインストール

[Releases](https://github.com/farion1231/cc-switch/releases/latest) から適切なバージョンをダウンロードしてください。

### システム要件

| システム | 最小バージョン                   | アーキテクチャ                      |
| -------- | -------------------------------- | ----------------------------------- |
| Windows  | Windows 10 以降                  | x64                                 |
| macOS    | macOS 10.15 (Catalina) 以降      | Intel (x64) / Apple Silicon (arm64) |
| Linux    | 下表参照                         | x64                                 |

### Windows

| ファイル                                 | 説明                                                 |
| ---------------------------------------- | ---------------------------------------------------- |
| `CC-Switch-v3.11.0-Windows.msi`          | **推奨** - MSI インストーラー、自動更新対応          |
| `CC-Switch-v3.11.0-Windows-Portable.zip` | ポータブル版、解凍して実行、レジストリ書き込みなし   |

### macOS

| ファイル                         | 説明                                                              |
| -------------------------------- | ----------------------------------------------------------------- |
| `CC-Switch-v3.11.0-macOS.zip`    | **推奨** - 解凍して Applications にドラッグ、Universal Binary     |
| `CC-Switch-v3.11.0-macOS.tar.gz` | Homebrew インストールと自動更新用                                 |

> **注意**: 作者が Apple Developer アカウントを持っていないため、初回起動時に「開発元を確認できません」という警告が表示される場合があります。一度閉じてから、「システム設定」→「プライバシーとセキュリティ」→「このまま開く」をクリックすると、その後は正常に開けます。

### Homebrew (macOS)

```bash
brew tap farion1231/ccswitch
brew install --cask cc-switch
```

更新：

```bash
brew upgrade --cask cc-switch
```

### Linux

| ディストリビューション                  | 推奨形式    | インストール方法                                                       |
| --------------------------------------- | ----------- | ---------------------------------------------------------------------- |
| Ubuntu / Debian / Linux Mint / Pop!\_OS | `.deb`      | `sudo dpkg -i CC-Switch-*.deb` または `sudo apt install ./CC-Switch-*.deb` |
| Fedora / RHEL / CentOS / Rocky Linux    | `.rpm`      | `sudo rpm -i CC-Switch-*.rpm` または `sudo dnf install ./CC-Switch-*.rpm`  |
| openSUSE                                | `.rpm`      | `sudo zypper install ./CC-Switch-*.rpm`                                |
| Arch Linux / Manjaro                    | `.AppImage` | 実行権限を追加して直接実行、または AUR を使用                          |
| その他のディストリビューション / 不明   | `.AppImage` | `chmod +x CC-Switch-*.AppImage && ./CC-Switch-*.AppImage`              |
